{"version":3,"sources":["pages/ContractDetection/component/ErrModel.tsx","pages/ContractDetection/index.tsx"],"names":["ErrModel","isOpen","onDismiss","errorMsg","minWidth","maxWidth","minHeight","className","onClick","ContractDetection","account","useActiveWeb3React","toggleWalletModal","useWalletModalToggle","history","useHistory","useState","currIndex","setcurrIndex","AddressContract","setAddressContract","contrastErrText","setcontrastErrText","ErrOpen","setErrOpen","seterrorMsg","detectIng","setdetectIng","TotalTest","setTotalTest","Testing","setTesting","overTimer","setoverTimer","detectContrast","params","chain","user_address","getList","then","res","data","erc20","nft721","totalNum","JSON","parse","count_risk","localStorage","setItem","stringify","push","styleButton","useMemo","rst","text","event","disabled","getItem","PageStart","useCallback","window","scrollTo","top","behavior","useEffect","getListsTotal","total","catch","e","console","log","src","AddressIcon","alt","open","leftShowPic","rightShowPic"],"mappings":"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","file":"static/js/12.03bb20a9.chunk.js","sourcesContent":["import React from 'react'\nimport PcModal from \"../../../components/Modal/PcModal\"\nimport { ErrWraper } from '../styled'\n\n\n\nexport default function ErrModel({\n    isOpen,\n    onDismiss,\n    errorMsg,\n  }:  {\n    isOpen:boolean,\n    onDismiss:()=>void,\n    errorMsg:string\n  }) {\n    return (\n        <PcModal isOpen={isOpen} minWidth={384} maxWidth={384} onDismiss={onDismiss} minHeight={214}>\n            <ErrWraper>\n                <div className='notice'>Notice</div>\n                <div className=\"info\">{errorMsg}</div>\n                <div className=\"button\" onClick={()=>{\n                  onDismiss()\n                }}>OK</div>\n            </ErrWraper>\n        </PcModal>\n    )\n  }","import React, { useCallback, useEffect, useMemo, useState } from \"react\";\nimport ErrModel from \"./component/ErrModel\";\nimport leftShowPic from \"../../assets/images/tokenDetec/leftShowPic.png\";\nimport rightShowPic from \"../../assets/images/tokenDetec/rightShowPic.png\";\nimport AddressIcon from \"../../assets/images/address_icon.png\";\nimport \"./antd.scss\";\nimport { useActiveWeb3React } from \"../../hooks\";\nimport { useWalletModalToggle } from \"../../state/application/hooks\";\nimport {\n  BottomDiv,\n  ComingDiv,\n  ContainerCon,\n  IntroDiv,\n  ShowDecting,\n  StyleButton,\n  WidthDiv,\n} from \"./styled\";\n// import { Select } from 'antd';\nimport { useHistory } from \"react-router-dom\";\nimport { getListsTotal, getList } from \"../../utils/fetch/detect\";\nimport { Dots, SmallLoading } from \"../../components/styleds\";\n\ninterface BtnProp {\n  disabled: boolean;\n  text: JSX.Element | string;\n  event?: () => void;\n}\nexport default function ContractDetection(): JSX.Element {\n  const { account } = useActiveWeb3React();\n  const toggleWalletModal = useWalletModalToggle();\n  const history = useHistory();\n\n  const [currIndex, setcurrIndex] = useState(0);\n  const [AddressContract, setAddressContract] = useState(\"\");\n\n  // const [selectChain, setselectChain] = useState(\"BSC\");\n\n  const [contrastErrText, setcontrastErrText] = useState(\"\");\n  const [ErrOpen, setErrOpen] = useState(false);\n  const [errorMsg, seterrorMsg] = useState(\"\");\n\n  const [detectIng, setdetectIng] = useState(false);\n\n  const [TotalTest, setTotalTest] = useState(0);\n\n  const [Testing, setTesting] = useState(false);\n  // const [TakeResultAllTime, setTakeResultAllTime] = useState(false)\n  const [overTimer, setoverTimer] = useState(false);\n\n  const detectContrast = () => {\n    if (!account) {\n      return;\n    }\n    setTesting(true);\n    const params = {\n      chain: \"BSC\",\n      user_address: account,\n    };\n\n    getList(params).then((res: any) => {\n      if (res?.data) {\n        const { erc20, nft721 } = res?.data;\n        const totalNum =\n        JSON.parse(erc20?.count_risk || 0) +\n        JSON.parse(nft721?.count_risk || 0);\n        setTesting(false);\n        localStorage.setItem(\"totalNum\", totalNum);\n        localStorage.setItem(\"ercData\", JSON.stringify(erc20));\n        localStorage.setItem(\"nftData\", JSON.stringify(nft721));\n        history.push(`/wallet_security/detail/${account}`);\n      } else {\n        setErrOpen(true);\n      }\n    });\n  };\n\n  //关闭错误弹框\n  const closeErrTip = () => {\n    setErrOpen(false);\n    seterrorMsg(\"\");\n    setcontrastErrText(\"\");\n    setAddressContract(\"\");\n    setdetectIng(false);\n    setTesting(false);\n  };\n\n  const styleButton: BtnProp = useMemo(() => {\n    const rst: BtnProp = {\n      text: \"Start detection\",\n      event: () => ({}),\n      disabled: true,\n    };\n    if (!account) {\n      rst.text = \"Connect Wallet\";\n      rst.disabled = false;\n      rst.event = () => {\n        toggleWalletModal();\n      };\n      return rst;\n    }\n\n    if (detectIng) {\n      rst.text = (\n        <>\n          <SmallLoading />\n          Detecting\n          <Dots />\n        </>\n      );\n      return rst;\n    }\n    if (overTimer) {\n      rst.text = \"Too many requests, please wait\";\n      return rst;\n    }\n    return {\n      text: \"Start detection\",\n      event: () => {\n        detectContrast();\n      },\n      disabled: false,\n    };\n    // eslint-disable-next-line\n  }, [\n    account,\n    toggleWalletModal,\n    detectContrast,\n    currIndex,\n    detectIng,\n    useActiveWeb3React,\n    overTimer,\n    // eslint-disable-next-line\n    localStorage.getItem(\"chain\"),\n    AddressContract,\n  ]);\n\n  //检测总数\n  const handleListTotal = () => {\n    getListsTotal()\n      .then((res) => {\n        if (res.data) {\n          const { total } = res.data;\n          setTotalTest(total);\n        }\n      })\n      .catch((e) => {\n        console.log(e, \"wrong\");\n      });\n  };\n\n  //初始化\n  const PageStart = useCallback(\n    () => {\n      window.scrollTo({\n        top: 0,\n        behavior: \"smooth\",\n      });\n      setErrOpen(false);\n      seterrorMsg(\"\");\n      setcontrastErrText(\"\");\n      setcurrIndex(0);\n      setAddressContract(\"\");\n      // setTakeResultAllTime(false)\n      setoverTimer(false);\n      localStorage.setItem(\"TakeResultAllTime\", \"false\");\n    },\n    // eslint-disable-next-line\n    [account]\n  );\n\n  useEffect(() => {\n    localStorage.setItem(\"chain\", \"BSC\");\n    handleListTotal();\n    PageStart();\n    // GetTestStatusStart();\n    // eslint-disable-next-line\n\n    // eslint-disable-next-line\n  }, [account]);\n\n  return (\n    <ContainerCon className=\"ContractDetection\">\n      {/* 合约检测入口 */}\n      <div className=\"homeContainer\">\n        {/* 内容区域 */}\n        <div className=\"container\">\n          <WidthDiv className=\"ContracDec\">\n            <div className=\"title\">\n              Address Security Scan\n              <span></span>\n            </div>\n            <div className=\"tabs\">\n              Conduct a comprehensive scan of your address for security\n              vulnerabilities.\n            </div>\n            {Testing ? (\n              <ShowDecting>\n                {overTimer ? (\n                  <>\n                    <div className=\"loading\"></div>\n                    <div className=\"text\">Too many requests, please wait</div>\n                  </>\n                ) : (\n                  <>\n                    <div className=\"loading\"></div>\n                    <div className=\"text\">Detecting…</div>\n                  </>\n                )}\n              </ShowDecting>\n            ) : (\n              <div className=\"addreccCon\">\n                {/* <div className=\"select\">\n                                <Select defaultValue=\"BSC\" onChange={handleChange} dropdownClassName='dropCon' showArrow >\n                                    <Option value=\"BSC\">  <img src={bscPic} alt=\"\" /> BSC</Option>\n                                    <Option value=\"ETH\">  <img src={ethPic} alt=\"\" /> ETH</Option>\n                                    <Option value=\"Optimism\">  <img src={optimismPic} alt=\"\" /> Optimism</Option>\n                                    <Option value=\"Polygon\">  <img src={polyPic} alt=\"\" /> Polygon</Option>\n                                    <Option value=\"Avalanche\">  <img src={avaPic} alt=\"\" /> Avalanche</Option>\n                                </Select>\n                            </div> */}\n                <div className=\"inputCon\">\n                  {/* <Input value={AddressContract} onUserInput={val => setAddressContract(val)} placeholder='Please enter the Token address' ShowRed={contrastErrText === '' || AddressContract === ''} setcontrastErrText={setcontrastErrText} ></Input> */}\n                  <img src={AddressIcon} alt=\"\" />{\" \"}\n                  <span>Your address: {account}</span>\n                </div>\n                <div className=\"err\">{contrastErrText}</div>\n              </div>\n            )}\n\n            {!Testing && (\n              <StyleButton onClick={styleButton.event}>\n                {styleButton.text}\n              </StyleButton>\n            )}\n          </WidthDiv>\n        </div>\n        <IntroDiv>\n          {/* <div>\n                <div className=\"top\">4</div>\n                <div className=\"bottom\">Engines</div>\n            </div> */}\n          <div>\n            <div className=\"top\">2</div>\n            <div className=\"bottom\">Public Chains Supported</div>\n          </div>\n\n          <div>\n            <div className=\"top\">119K+</div>\n            <div className=\"bottom\">Malicious Contracts Collected</div>\n          </div>\n          <div>\n            <div className=\"top\">{TotalTest || \"--\"} +</div>\n            <div className=\"bottom\">Scan Addresses</div>\n          </div>\n        </IntroDiv>\n      </div>\n\n      <ComingDiv>\n        <div className=\"tit\">TRIATHON Token Detection</div>\n        <div className=\"intro\">\n          A Crypto Detection and security Platform for Everyone.\n        </div>\n        <div\n          className=\"go\"\n          onClick={() => {\n            window.open(\"https://www.triathon.space/tokenDetections/#/\");\n          }}\n        >\n          Go\n        </div>\n      </ComingDiv>\n      <BottomDiv>\n        <div className=\"left\">\n          <img src={leftShowPic} alt=\"\" />\n        </div>\n        <div className=\"right\">\n          <img src={rightShowPic} alt=\"\" />\n        </div>\n      </BottomDiv>\n      <ErrModel\n        isOpen={ErrOpen}\n        onDismiss={closeErrTip}\n        errorMsg={errorMsg}\n      ></ErrModel>\n    </ContainerCon>\n  );\n}\n"],"sourceRoot":""}